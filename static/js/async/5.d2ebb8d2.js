"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["5"],{5246:function(n,e,t){t.r(e),t.d(e,{default:()=>i});var s=t(4246),o=t(980);function r(n){let e=Object.assign({h1:"h1",a:"a",p:"p",strong:"strong",pre:"pre",code:"code",h2:"h2"},(0,o.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{id:"请求工具",children:["请求工具",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#请求工具",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"引入"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { request } from '@fairys/taro-tools-react';\n"})}),"\n",(0,s.jsxs)(e.h2,{id:"参数",children:["参数",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import Taro from '@tarojs/taro';\nexport interface TaroRequestOption {\n    /**模块名称*/\n    module?: string;\n    /**是否忽略token*/\n    isIgnoreToken?: boolean;\n    /**是否提示错误信息*/\n    isShowErrorMessage?: boolean;\n}\nexport interface RequestInstanceOptions extends Taro.request.Option<any, any>, TaroRequestOption {\n}\nexport interface DownloadFileOptions extends Taro.downloadFile.Option, TaroRequestOption {\n    /**下载进度回调*/\n    onProgress?: Taro.DownloadTask.OnProgressUpdateCallback;\n}\nexport interface UploadFileOptions extends Taro.uploadFile.Option, TaroRequestOption {\n    /**上传进度回调*/\n    onProgress?: Taro.UploadTask.OnProgressUpdateCallback;\n}\nexport interface RequestInstanceCreateOptions {\n    /**\n     * 公共请求配置\n     * @default {}\n     */\n    commonOptions?: Omit<Taro.request.Option<any, any>, 'url'>;\n    /**\n     * 请求IP地址\n     * @default ''\n     */\n    IP?: string | ((url: string, module?: string, env?: string) => string);\n    /**\n     * 简单的代理配置\n     * @default {}\n     */\n    proxy?: {\n        default?: {\n            dev?: string;\n            pro?: string;\n        };\n        dev: Record<string, string | {\n            target: string;\n            pathRewrite: Record<string, string>;\n        }>;\n        pro: Record<string, string | {\n            target: string;\n            pathRewrite: Record<string, string>;\n        }>;\n    };\n}\nexport declare class RequestInstance {\n    /**请求IP地址*/\n    IP?: string | ((url: string, module?: string, env?: string) => string);\n    /**简单的代理配置*/\n    proxy?: RequestInstanceCreateOptions['proxy'];\n    /**公共请求配置*/\n    commonOptions: Omit<Taro.request.Option<any, any>, 'url'>;\n    constructor(options?: RequestInstanceCreateOptions);\n    /**创建实例*/\n    static create(options?: RequestInstanceCreateOptions): RequestInstance;\n    /**扩展请求配置*/\n    extends: (options?: RequestInstanceCreateOptions) => this;\n    /**获取请求地址*/\n    getHttpPath: (url: string, module?: string) => string;\n    /**获取转换后地址*/\n    getProxyHost: (url: string, module?: string) => {\n        host: string;\n        url: string;\n    };\n    /**格式化地址*/\n    formatUrl: (url: string, module?: string) => string;\n    formatRequestOptions: (options: RequestInstanceOptions | DownloadFileOptions | UploadFileOptions) => {\n        url: string;\n        data?: any;\n        timeout?: number;\n        method?: keyof Taro.request.Method;\n        dataType?: keyof Taro.request.DataType | string;\n        responseType?: keyof Taro.request.ResponseType;\n        enableHttp2?: boolean;\n        enableQuic?: boolean;\n        enableCache?: boolean;\n        enableHttpDNS?: boolean;\n        httpDNSServiceId?: string;\n        enableChunked?: boolean;\n        forceCellularNetwork?: boolean;\n        enableCookie?: boolean;\n        referrerStrategy?: keyof Taro.request.ReferrerStrategy;\n        success?: (result: Taro.request.SuccessCallbackResult<any>) => void;\n        fail?: (res: TaroGeneral.CallbackResult) => void;\n        complete?: (res: Partial<Taro.request.SuccessCallbackResult> & TaroGeneral.CallbackResult) => void;\n        jsonp?: boolean | string;\n        jsonpCache?: RequestCache;\n        mode?: keyof Taro.request.CorsMode;\n        credentials?: keyof Taro.request.Credentials;\n        cache?: keyof Taro.request.Cache;\n        retryTimes?: number;\n        backup?: string | string[];\n        signal?: AbortSignal;\n        dataCheck?(): boolean;\n        useStore?: boolean;\n        storeCheckKey?: string;\n        storeSign?: string;\n        storeCheck?(): boolean;\n        header: {\n            [x: string]: any;\n        };\n    } | {\n        url: string;\n        /**下载进度回调*/\n        onProgress?: Taro.DownloadTask.OnProgressUpdateCallback;\n        filePath?: string;\n        timeout?: number;\n        withCredentials?: boolean;\n        complete?: (res: TaroGeneral.CallbackResult) => void;\n        fail?: (res: TaroGeneral.CallbackResult) => void;\n        success?: (result: Taro.downloadFile.FileSuccessCallbackResult) => void;\n        header: {\n            [x: string]: any;\n        };\n    } | {\n        url: string;\n        /**上传进度回调*/\n        onProgress?: Taro.UploadTask.OnProgressUpdateCallback;\n        filePath: string;\n        name: string;\n        formData?: TaroGeneral.IAnyObject;\n        timeout?: number;\n        fileName?: string;\n        withCredentials?: boolean;\n        complete?: (res: TaroGeneral.CallbackResult) => void;\n        fail?: (res: TaroGeneral.CallbackResult) => void;\n        success?: (result: Taro.uploadFile.SuccessCallbackResult) => void;\n        header: {\n            [x: string]: any;\n        };\n    };\n    /**发送请求，返回 Taro.RequestTask */\n    requestBase: (options: RequestInstanceOptions) => Taro.RequestTask<any>;\n    /**发送请求,返回 Promise */\n    request: (options: RequestInstanceOptions) => Promise<{\n        code?: number;\n        data?: any;\n        message?: string;\n    }>;\n    /**GET请求*/\n    GET: (options: RequestInstanceOptions) => Promise<{\n        code?: number;\n        data?: any;\n        message?: string;\n    }>;\n    /**POST请求*/\n    POST: (options: RequestInstanceOptions) => Promise<{\n        code?: number;\n        data?: any;\n        message?: string;\n    }>;\n    /**发送formData格式数据*/\n    formData: (options: RequestInstanceOptions) => Promise<{\n        code?: number;\n        data?: any;\n        message?: string;\n    }>;\n    /**发送x-www-form-urlencoded格式数据*/\n    xFormUrlEncoded: (options: RequestInstanceOptions) => Promise<{\n        code?: number;\n        data?: any;\n        message?: string;\n    }>;\n    /**下载文件(返回 Taro.DownloadTask.DownloadTaskPromise ，可显示下载进度)*/\n    downloadFileTask: (options: DownloadFileOptions) => Taro.DownloadTask.DownloadTaskPromise | undefined;\n    /**下载文件*/\n    downloadFile: (options: DownloadFileOptions) => Promise<Taro.downloadFile.FileSuccessCallbackResult>;\n    /**上传文件(返回 Taro.UploadTask.UploadTaskPromise ，可显示上传进度)*/\n    uploadFileTask: (options: UploadFileOptions) => Taro.UploadTask.UploadTaskPromise;\n    /**上传文件*/\n    uploadFile: (options: UploadFileOptions) => Promise<Taro.uploadFile.SuccessCallbackResult>;\n}\n/** 请求*/\nexport declare const request: RequestInstance;\n\n"})}),"\n",(0,s.jsxs)(e.h2,{id:"使用",children:["使用",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#使用",children:"#"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"\nimport { request } from '@fairys/taro-tools-react';\nimport { View, Button } from '@tarojs/components';\n\nconst Page = ()=> {\n\n  const handleClick = async ()=>{\n    try {\n      const res = await request.POST({ url: '/api/page/select', data: { id: 1 } });\n      console.log(res);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <View>\n      <Button onClick={handleClick}>点击</Button>\n    </View>\n  )\n}\nexport default Page\n"})})]})}function a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,o.ah)(),n.components);return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(r,{...n})}):r(n)}let i=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["zh%2Fui%2Futils%2Frequest.md"]={toc:[{text:"参数",id:"参数",depth:2},{text:"使用",id:"使用",depth:2}],title:"请求工具",headingTitle:"请求工具",frontmatter:{}}}}]);