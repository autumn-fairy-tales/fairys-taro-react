"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["641"],{9913:function(e,n,t){t.r(n),t.d(n,{default:()=>c});var a=t(4246),s=t(980);function r(e){let n=Object.assign({h1:"h1",a:"a",p:"p",strong:"strong",pre:"pre",code:"code",h2:"h2"},(0,s.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"valtio-工具",children:["valtio 工具",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#valtio-工具",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"引入"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { useValtioState, useValtioInstaceState } from '@fairys/taro-tools-react';\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"参数",children:["参数",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"/**\n * 单个proxy对象数据基础实例封装\n */\nexport declare class ProxyInstanceObjectBase<T extends Object = any> {\n    /**proxy 可状态更新字段 */\n    store: T;\n    /**初始化存储值*/\n    _ctor: (inital?: Partial<T>, fields?: string[]) => this;\n    /**更新store数据 循环对象进行存储，当值是对象的时候存储为ref*/\n    _setValues: <K = T>(values: Partial<K>, fields?: string[]) => this;\n    /**删除字段值*/\n    _deleteValue: (names: string | string[]) => this;\n    /**创建 ref 对象 (ref对象不做监听更新)*/\n    _createRef: <K extends Object = any>(inital?: K) => K;\n}\n/**创建简单的状态管理*/\nexport declare const useValtioState: <T extends object>(inital?: T) =>  [T, ProxyInstanceObjectBase<T>, any];\nexport declare const useValtioInstaceState: <T extends object = any, K extends ProxyInstanceObjectBase<T> = ProxyInstanceObjectBase<T>, M extends {\n    new (...args: any[]): K;\n} = {\n    new (...args: any[]): K;\n}>(Instance: M) =>  [T, K, any];\n\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"使用",children:["使用",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用",children:"#"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"\nimport { ProxyInstanceObjectBase , useValtioInstaceState } from '@fairys/taro-tools-react';\nimport { View, Button } from '@tarojs/components';\nimport { proxy } from 'valtio';\n\nclass ProxyInstanceObject extends ProxyInstanceObjectBase {\n   /**proxy 可状态更新字段 */\n  store = proxy({ value:0 });\n\n}\n\nconst Page = ()=> {\n  const [instanceState, instanceProxyInstance] = useValtioInstaceState(ProxyInstanceObject);\n\n  const handleClick = async ()=>{\n    instanceProxyInstance.store.value++;\n    instanceProxyInstance._setValues({ value: instanceProxyInstance.store.value++ });\n  }\n\n  return (\n    <View>\n      <Button onClick={handleClick}>点击</Button>\n    </View>\n  )\n}\nexport default Page\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"使用-1",children:["使用",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-1",children:"#"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"\nimport { useValtioState } from '@fairys/taro-tools-react';\nimport { View, Button } from '@tarojs/components';\n\nconst Page = ()=> {\n  const [state, valtioProxyInstance] = useValtioState({ value: 0 })\n\n  const handleClick = async ()=>{\n    valtioProxyInstance.store.value++;\n    valtioProxyInstance._setValues({ value: valtioProxyInstance.store.value++ });\n  }\n\n  return (\n    <View>\n      <Button onClick={handleClick}>点击</Button>\n    </View>\n  )\n}\nexport default Page\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}let c=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fui%2Futils%2Fvaltio.md"]={toc:[{text:"参数",id:"参数",depth:2},{text:"使用",id:"使用",depth:2},{text:"使用",id:"使用-1",depth:2}],title:"valtio 工具",headingTitle:"valtio 工具",frontmatter:{}}}}]);