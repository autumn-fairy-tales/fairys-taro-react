"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["452"],{2885:function(n,e,a){a.r(e),a.d(e,{default:()=>i});var t=a(4246),s=a(980);function o(n){let e=Object.assign({h1:"h1",a:"a",div:"div",p:"p",strong:"strong",pre:"pre",code:"code",h2:"h2"},(0,s.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"页面数据状态实例",children:["页面数据状态实例",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#页面数据状态实例",children:"#"})]}),"\n",(0,t.jsxs)(e.div,{className:"rspress-directive tip",children:[(0,t.jsx)(e.div,{className:"rspress-directive-title",children:"TIP"}),(0,t.jsxs)(e.div,{className:"rspress-directive-content",children:["\n",(0,t.jsx)(e.p,{children:"用于管理列表页面数据状态, 包含列表查询, 列表分页, 列表总数, 列表数据等状态"}),"\n"]})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"引入"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"import { usePageData } from '@fairys/taro-tools-react';\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"参数",children:["参数",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"import { ProxyInstanceObjectBase } from '@fairys/taro-tools-react';\n\nexport interface PageInfoDataInstanceState extends Object {\n    /**loading存储*/\n    loading?: Record<string, boolean>;\n    /**编辑表单数据*/\n    editFormData?: Record<string, any>;\n    /**编辑类型*/\n    editType?: 'add' | 'edit' | 'info';\n    /**查询详情是否成功*/\n    isInfoSuccess?: boolean;\n    /**数据默认值不使用*/\n    __defaultValue?: string;\n    [s: string]: any;\n}\nexport declare class PageInfoDataInstance<T extends PageInfoDataInstanceState = PageInfoDataInstanceState> extends ProxyInstanceObjectBase<T> {\n    /**默认值*/\n    defaultInital: T;\n    requestInfoConfig?: {\n        /**详情查询-请求之前处理参数*/\n        onBefore?: (store: T) => Promise<Partial<T>> | Partial<T>;\n        /**详情查询-请求接口*/\n        getInfo?: (payload: any) => Promise<{\n            code?: number;\n            data?: any;\n            message?: string;\n        }>;\n        /**详情查询-请求之后处理返回值进行存储*/\n        onAfter?: (data: Record<string, any>) => Partial<T>;\n        /**详情查询-code!==1 时 触发*/\n        onError?: (data: Record<string, any>) => void;\n    };\n    requestSaveInfoConfig?: {\n        /**详情保存-请求之前处理参数*/\n        onSaveBefore?: (store: T) => Promise<Record<string, any>> | Record<string, any>;\n        /**详情保存接口*/\n        onSaveInfo?: (payload: any) => Promise<{\n            code?: number;\n            data?: any;\n            message?: string;\n        }>;\n        /**详情保存-请求之后处理返回值进行存储*/\n        onSaveAfter?: (data: Record<string, any>) => void;\n        /**详情查询-code!==1 时 触发*/\n        onSaveError?: (data: Record<string, any>) => void;\n        /**保存成功-跳转页面*/\n        saveSuccessNavigate?: string | 'navigateBack' | number | ((data: any) => void);\n        /**是否显示成功提示*/\n        isShowSuccessMessage?: boolean;\n    };\n    constructor(options?: PageInfoDataOptions<T>);\n    store: T;\n    /**初始化状态值*/\n    main_page_store: (initalValues?: Partial<T>, file?: string[]) => this;\n    /**更新页面级的 pageLoading */\n    updatedLoading: (loading?: boolean) => void;\n    /**内置——查询详细信息*/\n    main_getInfo: () => Promise<void>;\n    /**保存数据*/\n    main_saveInfo: () => Promise<void>;\n}\nexport interface PageInfoDataOptions<T extends PageInfoDataInstanceState = PageInfoDataInstanceState> {\n    /**详情查询请求配置*/\n    requestInfoConfig?: PageInfoDataInstance<T>['requestInfoConfig'];\n    /**详情保存请求配置*/\n    requestSaveInfoConfig?: PageInfoDataInstance<T>['requestSaveInfoConfig'];\n    /**初始值*/\n    initialValues?: Partial<T>;\n}\n/**\n * 页面级数据状态管理\n */\nexport declare const usePageInfoData: <T extends PageInfoDataInstanceState = PageInfoDataInstanceState>(options?: PageInfoDataOptions<T>) => [T, PageInfoDataInstance<T>, string | undefined];\n\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"使用",children:["使用",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#使用",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",children:"\nimport { usePageInfoData ，connectToastMessage} from '@fairys/taro-tools-react';\nimport { View, Button } from '@tarojs/components';\n\nconst Page = ()=> {\n    const [state, instance] = usePageData({\n        /**详情查询请求配置*/\n        requestConfig:{\n            getList: async (params) => {\n                console.log(params);\n                return {\n                    code: 200,\n                    data: {\n                        list: [],\n                        total: 0,\n                    },\n                    message: '获取成功',\n                };\n            },\n        }\n    })\n  return (\n    <View>\n      <Button onClick={()=>instance.main_getInfo({ id: 1 })}>获取列表</Button>\n    </View>\n  )\n}\nexport default connectToastMessage(Page)\n\n"})})]})}function r(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}let i=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["zh%2Fui%2Fcontext%2Fpage.md"]={toc:[{text:"参数",id:"参数",depth:2},{text:"使用",id:"使用",depth:2}],title:"页面数据状态实例",headingTitle:"页面数据状态实例",frontmatter:{}}}}]);